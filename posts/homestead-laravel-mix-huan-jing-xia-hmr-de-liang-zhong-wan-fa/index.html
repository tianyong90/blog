<!doctype html>
<html data-n-head-ssr>
<head>
  <title>Homestead + laravel-mix ç¯å¢ƒä¸‹ hmr çš„ä¸¤ç§ç©æ³• - ç”°å†™</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="keywords" name="keywords" content="laravel-mix,homestead,hmr"><meta data-n-head="ssr" data-hid="description" name="description" content=""><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/_nuxt/08a5556.js" as="script"><link rel="preload" href="/_nuxt/79c8342.js" as="script"><link rel="preload" href="/_nuxt/vendors/app.2366da3.css" as="style"><link rel="preload" href="/_nuxt/c3bf190.js" as="script"><link rel="preload" href="/_nuxt/app.7182cfb.css" as="style"><link rel="preload" href="/_nuxt/ffcc2c1.js" as="script"><link rel="preload" href="/_nuxt/pages/posts/_slug.05e6505.css" as="style"><link rel="preload" href="/_nuxt/789a29e.js" as="script"><link rel="stylesheet" href="/_nuxt/vendors/app.2366da3.css"><link rel="stylesheet" href="/_nuxt/app.7182cfb.css"><link rel="stylesheet" href="/_nuxt/pages/posts/_slug.05e6505.css">
</head>
<body>
<div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><nav class="sticky inset-x-0 top-0 z-50 nav" data-v-cd144d6c><div class="container flex mx-auto z-50 justify-between items-center h-full" data-v-cd144d6c><a href="/" class="text-white text-xl font-normal no-underline nuxt-link-active" data-v-cd144d6c>ç”°å†™</a> <div class="ml-auto mr-2 search-bar" data-v-cd144d6c><input placeholder="æœç´¢æ–‡ç« " class="search-input" data-v-cd144d6c> <div class="search-result" style="display:none" data-v-cd144d6c></div></div> <div class="hidden md:flex" data-v-cd144d6c><a href="https://github.com/tianyong90" target="_blank" class="text-white ml-4 font-light no-underline" data-v-cd144d6c>GitHub</a> <a href="https://weibo.com/1707227001" target="_blank" class="text-white ml-4 font-light no-underline" data-v-cd144d6c>å¾®åš</a></div> <span class="md:hidden mdi text-white text-lg dropdown-menu-toggle mdi-menu" data-v-cd144d6c></span> <div class="container flex md:hidden dropdown-menu" style="display:none" data-v-cd144d6c><a href="/open-source" class="dropdown-menu-item" data-v-cd144d6c>
        å¼€æº
      </a> <a href="https://github.com/tianyong90" target="_blank" class="dropdown-menu-item" data-v-cd144d6c>GitHub</a> <a href="https://weibo.com/1707227001" target="_blank" class="dropdown-menu-item" data-v-cd144d6c>å¾®åš</a></div></div></nav> <div class="container mt-4 md:my-4" data-v-27cbca2e><div class="post rounded-lg overflow-hidden bg-white" data-v-27cbca2e><img src="https://raw.githubusercontent.com/tianyong90/blog/gh-pages/_nuxt/posts/Homestead-laravel-mix-%E7%8E%AF%E5%A2%83%E4%B8%8B-hmr-%E7%9A%84%E4%B8%A4%E7%A7%8D%E7%8E%A9%E6%B3%95//top_img.png" loading="lazy" class="w-full cover-image" data-v-27cbca2e> <div class="px-4 md:px-8 py-2" data-v-27cbca2e><div class="mb-4" data-v-27cbca2e><h1 class="text-gray-800 text-xl font-normal" data-v-27cbca2e>Homestead + laravel-mix ç¯å¢ƒä¸‹ hmr çš„ä¸¤ç§ç©æ³•</h1> <div class="text-gray-700 text-xs post-date" data-v-27cbca2e>2019-04-18</div></div> <div class="markdown-body" data-v-27cbca2e><p>æˆ‘åœ¨å‰å‡ å¤©åˆšå†™è¿‡çš„<a href="https://tianyong90.com/2019/04/12/rang-f5-xie-yi-hui-er-laravel-mix-zi-dong-shua-xin-zhi-dao/">ã€Šè®© F5 æ­‡ä¸€ä¼šå„¿â€”â€”laravel-mix è‡ªåŠ¨åˆ·æ–°ä¹‹é“ã€‹</a>ä¸­ä»‹ç»äº† laravel-mix å®ç°è‡ªåŠ¨åˆ·æ–°çš„å‡ ç§æ–¹æ³•ï¼Œå…¶ä¸­å°±æœ‰æ¶‰åŠ hmrï¼ˆHot Module Replacementï¼‰ï¼Œä½†é‡Œé¢éƒ½æ˜¯ä»¥ Laradock ç¯å¢ƒä¸ºä¾‹ã€‚å¯¹äº Laravel å®˜æ–¹é¦–æ¨çš„ Homestead å½“ç„¶ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªä¸è¿‡ç”¨æ³•ä¸Šæœ‰äº›å·®åˆ«ï¼ŒäºåŠ ä¸Š laravel-mix æœ¬èº«çš„ä¸€äº› BUGï¼ˆåœ¨ issue é‡Œæœç´¢ <code>hmr</code> ç»“æœå°±æœ‰å¥½å‡ é¡µ ğŸ˜„ï¼‰ï¼Œå¯¹äºåˆšæ¥è§¦çš„äººæ¥è¯´å¯èƒ½æ— ä»ä¸‹æ‰‹ã€‚</p>
<p>æœ¬æ–‡ä»‹ç»ä¸¤ç§ä¸åŒçš„ç©æ³•ã€‚</p>
<blockquote>
<p>é¦–å…ˆå‡å®šä½ å·²ç»åˆ›å»ºäº†ä¸€ä¸ª laravel é¡¹ç›®ï¼Œè¿›è¡Œäº†ç›¸å…³é…ç½®ï¼ˆ.env é…ç½®åŠç»‘å®šæµ‹è¯•åŸŸåï¼Œå¦‚ï¼šlaravel.testï¼‰å¹¶å·²è£…å¥½äº†åç«¯ä¾èµ–</p>
</blockquote>
<h2 id="ç©æ³•ä¸€ï¼šä½¿ç”¨è™šæ‹Ÿæœºä¸­çš„-node-ç¯å¢ƒ"><a class="header-anchor" href="#ç©æ³•ä¸€ï¼šä½¿ç”¨è™šæ‹Ÿæœºä¸­çš„-node-ç¯å¢ƒ">#</a> ç©æ³•ä¸€ï¼šä½¿ç”¨è™šæ‹Ÿæœºä¸­çš„ Node ç¯å¢ƒ</h2>
<p>å› ä¸º Homestead æä¾›çš„ç¯å¢ƒé‡Œé»˜è®¤åŒ…å«äº†å‰ç«¯å¼€å‘æ‰€éœ€è¦çš„ Node ç¯å¢ƒåŠç›¸å…³å·¥å…·ï¼ˆgulp, npm, yarn ç­‰ï¼‰ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬ä¼¼ä¹æ˜¯å¾ˆçœäº‹çš„é€‰æ‹©ã€‚</p>
<p><img src="https://raw.githubusercontent.com/tianyong90/blog/gh-pages/_nuxt/posts/Homestead-laravel-mix-%E7%8E%AF%E5%A2%83%E4%B8%8B-hmr-%E7%9A%84%E4%B8%A4%E7%A7%8D%E7%8E%A9%E6%B3%95/%E6%96%B9%E6%B3%951.png" alt="ç©æ³•ä¸€ç¤ºæ„å›¾"></p>
<ol>
<li>
<p><code>vagrant ssh</code> è¿æ¥è™šæ‹Ÿæœºï¼Œè¿›å…¥é¡¹ç›®ç›®å½•åå®‰è£…å‰ç«¯ä¾èµ–</p>
<!--beforebegin--><div class="language-bash extra-class"><!--afterbegin--><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">install</span>
</code></pre>
<!--beforeend--></div><!--afterend--></li>
<li>
<p>åœ¨ webpack.mix.js ä¸­è°ƒæ•´ç›¸å…³é…ç½®</p>
<ul>
<li>
<p>ä½¿ç”¨ mix.Webpack() é…ç½® devServer</p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code>mix<span class="token punctuation">.</span><span class="token function">webpackConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
        watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            poll<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token comment">// è¿™ä¸ªå€¼å¯è°ƒæ•´ï¼Œæ€§èƒ½é«˜çš„æ—¶å€™å¯ä»¥è°ƒå°ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è®¾ç½®ä¸º true</span>
            ignored<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<!--beforeend--></div><!--afterend--></li>
</ul>
<blockquote>
<p>è¿™ä¸€é…ç½®å¾ˆå…³é”®ï¼Œå› ä¸ºè¦æ˜¯ä»…ä½¿ç”¨ devServer çš„é»˜è®¤ watch é€‰é¡¹ï¼Œå¯¹äºè™šæ‹Ÿæœºç¯å¢ƒæ˜¯æ— æ•ˆçš„ï¼ˆ<a href="https://webpack.js.org/configuration/watch/#watchoptionspoll">è§ webpack æ–‡æ¡£</a>ï¼‰</p>
</blockquote>
<ul>
<li>
<p>è°ƒæ•´ hmrOptions</p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code>mix<span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    hmrOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        host<span class="token operator">:</span> <span class="token string">'laravel.test'</span><span class="token punctuation">,</span>
        port<span class="token operator">:</span> <span class="token number">8080</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<!--beforeend--></div><!--afterend--></li>
</ul>
</li>
<li>
<p>åœ¨<strong>è™šæ‹Ÿæœº</strong>ç»ˆç«¯ä¸­æ‰§è¡Œ<code>yarn run hot</code>ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ç»‘å®šçš„æµ‹è¯•åŸŸåï¼ˆå¦‚ï¼šlaravel.testï¼‰è®¿é—®</p>
</li>
<li>
<p>ä¿®æ”¹ JS ç­‰ï¼Œè‡ªåŠ¨ç¼–è¯‘åæµè§ˆå™¨ä¸­é¡µé¢å³è‡ªåŠ¨æ›´æ–°</p>
</li>
</ol>
<h2 id="ç©æ³•äºŒï¼šä½¿ç”¨å®¿ä¸»æœºä¸­çš„-node-ç¯å¢ƒ"><a class="header-anchor" href="#ç©æ³•äºŒï¼šä½¿ç”¨å®¿ä¸»æœºä¸­çš„-node-ç¯å¢ƒ">#</a> ç©æ³•äºŒï¼šä½¿ç”¨å®¿ä¸»æœºä¸­çš„ Node ç¯å¢ƒ</h2>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å®¿ä¸»æœºçš„ Node ç¯å¢ƒï¼Œå¯¹äºå¼€å‘éƒ½æ¥è¯´ï¼Œè¿™äº›ç¯å¢ƒåº”è¯¥ä¹Ÿæ˜¯å¿…é¡»çš„äº†ã€‚</p>
<p><img src="https://raw.githubusercontent.com/tianyong90/blog/gh-pages/_nuxt/posts/Homestead-laravel-mix-%E7%8E%AF%E5%A2%83%E4%B8%8B-hmr-%E7%9A%84%E4%B8%A4%E7%A7%8D%E7%8E%A9%E6%B3%95/%E6%96%B9%E6%B3%952.png" alt="ç©æ³•äºŒç¤ºæ„å›¾"></p>
<ol>
<li>
<p>ä»å®¿ä¸»æœºç»ˆç«¯è¿›å…¥é¡¹ç›®ç›®å½•å¹¶å®‰è£…å‰ç«¯ä¾èµ–</p>
<!--beforebegin--><div class="language-bash extra-class"><!--afterbegin--><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">install</span>
</code></pre>
<!--beforeend--></div><!--afterend--></li>
<li>
<p>webpack.mix.js ä¸­ä½¿ç”¨ webpackConfig è¿›è¡Œé…ç½®</p>
<!--beforebegin--><div class="language-js extra-class"><!--afterbegin--><pre v-pre class="language-js"><code>mix<span class="token punctuation">.</span><span class="token function">webpackConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
        disableHostCheck<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// å…¶å®ƒé…ç½®</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<!--beforeend--></div><!--afterend--><blockquote>
<p>disableHostCheck: true æ˜¯ä¸ºäº†é¿å…å‡ºç°ä¸‹é¢è¿™ç§é”™è¯¯ã€‚</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/tianyong90/blog/gh-pages/_nuxt/posts/Homestead-laravel-mix-%E7%8E%AF%E5%A2%83%E4%B8%8B-hmr-%E7%9A%84%E4%B8%A4%E7%A7%8D%E7%8E%A9%E6%B3%95/error.png" alt="é”™è¯¯æˆªå›¾"></p>
<blockquote>
<p>ä¸ç©æ³•ä¸€ä¸­ä¸ä¸€æ ·ï¼Œä¸å†éœ€è¦ç‰¹åˆ«åœ¨ hmrOptions ä¸­æŒ‡å®š devServer å’Œ host å’Œ portï¼Œä½¿ç”¨é»˜è®¤çš„å°±å¥½ï¼ˆäº‹å®ä¸Šä¹Ÿ<strong>ä¸èƒ½</strong>åƒå‰é¢é‚£æ ·æŒ‡å®šï¼Œå› ä¸ºä¼šå‡ºç° IP/ç«¯å£ å†²çªï¼‰</p>
</blockquote>
</li>
<li>
<p>åœ¨å®¿ä¸»æœºç»ˆç«¯ä¸­æ‰§è¡Œ<code>yarn run hot</code>ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ç»‘å®šçš„æµ‹è¯•åŸŸåï¼ˆå¦‚ï¼šlaravel.testï¼‰è®¿é—®</p>
</li>
<li>
<p>ä¿®æ”¹ JS ç­‰ï¼Œè‡ªåŠ¨ç¼–è¯‘åæµè§ˆå™¨ä¸­é¡µé¢å³è‡ªåŠ¨æ›´æ–°</p>
</li>
</ol>
<p><strong>laravel-mix 4.0.16 ä¸­ä¿®å¤äº†åœ¨ windows ä¸­ä½¿ç”¨ hmr çš„ BUGï¼Œå¼€å‘ä½“éªŒç›¸è¾ƒä»¥å‰æ›´å¥½ã€‚https://github.com/JeffreyWay/laravel-mix/pull/1995</strong></p>
<h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“">#</a> æ€»ç»“</h2>
<p>ä¸¤ç§æ–¹æ³•å¹¶æ²¡æœ‰è°å¥½è°åä¹‹åˆ†ï¼Œå…·ä½“ä½¿ç”¨å“ªç§æ–¹æ³•è§†å…·ä½“åœºæ™¯åŠä¸ªäººå–œå¥½è€Œå®šã€‚å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œé€šå¸¸ä½¿ç”¨ç¬¬äºŒç§ï¼Œä¸»è¦åŸå› æœ‰äºŒï¼š</p>
<ul>
<li>
<p>ä¸€æ˜¯å‡ºäºæ€§èƒ½/å»¶è¿Ÿæ–¹é¢çš„è€ƒè™‘ï¼Œå› ä¸ºåœ¨è™šæ‹Ÿæœºä¸­ä½¿ç”¨è½®è¯¢ï¼ˆpollï¼‰çš„æ–¹å¼æ¥ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œå½“ poll è®¾ç½®é—´éš”è¾ƒå¤§æ—¶å¯èƒ½ä¼šå‡ºç°ä¸€å®šå»¶è¿Ÿï¼Œè€Œè®¾ç½®å¤ªå°è½®è¯¢å¤ªé¢‘ç¹åˆ™åˆå¯èƒ½é€ æˆä¸€å®šçš„æ€§èƒ½å‹åŠ›ã€‚æ‰€ä»¥ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„ Node ç¯å¢ƒä¼¼ä¹æ›´ä¸ºåˆ’ç®—ã€‚</p>
</li>
<li>
<p>äºŒæ˜¯è‡ªå·±ä½¿ç”¨çš„ IDEï¼ˆPhpStormï¼‰è¿è¡Œåœ¨å®¿ä¸»æœºï¼ˆWindowsï¼‰ä¸­ï¼Œè€Œ PhpStorm çš„ä¸€äº›æ’ä»¶ï¼ˆæˆ–æœåŠ¡ï¼‰å¦‚ Eslintã€TypeScriptã€ Prettier éœ€è¦ä½¿ç”¨ä½¿ç”¨æœ¬åœ°å®‰è£…çš„ä¸€äº› npm åŒ…ï¼Œè¿™æ ·å°±åªèƒ½åœ¨å®¿ä¸»ç¯å¢ƒé‡Œå®‰è£…ä¾èµ–ã€‚ï¼ˆè™½ç„¶å¯ä»¥è€ƒè™‘åœ¨å®¿ä¸»æœºå…¨å±€å®‰è£…ä¾èµ–ï¼Œä½†è¯¸å¦‚ eslint-config-xxx ä¹‹ç±»çš„é¡¹ç›®ç›¸å…³çš„åŒ…ä¹Ÿå…¨å±€å®‰è£…ï¼Œå¿…ç„¶é€ æˆæ··ä¹±ï¼‰</p>
</li>
</ul>
<p>å¦‚åŒå­¦ä¹ å¾ˆå¤šå…¶å®ƒæ–°å·¥å…·æ–°ç©æ³•ä¸€æ ·ï¼Œåˆšå¼€å§‹æŠ˜è…¾ laravel-mix æ—¶æ€»æ˜¯ç£•ç£•ç»Šç»Š(æœ‰ä¸å°‘å‘ï¼‰ï¼Œä½†ä¸€æ—¦æŒæ¡äº†çªé—¨ï¼Œå°±èƒ½æå¤§çš„æ–¹ä¾¿æ—¥å¸¸å¼€å‘ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚åšå®¢é‡Œè®°ä¸‹è¿™äº›ï¼Œæƒå½“å¤‡å¿˜ï¼Œä¹Ÿç®—æ˜¯åˆ†äº«ï¼Œç‹¬ä¹ä¸å¦‚ä¼—ä¹ã€‚</p>
</div> <div class="social-share" data-v-27cbca2e></div></div></div> <div class="px-4 md:px-0 navigator" data-v-27cbca2e><a href="/posts/sheng-ming-zai-yu-zhe-teng-wo-yong-nuxt.js-chong-gou-liao-bo-ke" class="navigator-btn mr-auto btn-prev" data-v-27cbca2e><span class="mdi mdi-chevron-left" data-v-27cbca2e></span> ä¸Šä¸€ç¯‡
    </a> <a href="/posts/rang-f5-xie-yi-hui-er-laravel-mix-zi-dong-shua-xin-zhi-dao" class="navigator-btn ml-auto btn-next" data-v-27cbca2e>ä¸‹ä¸€ç¯‡<span class="mdi mdi-chevron-right" data-v-27cbca2e></span></a></div></div> <footer class="pt-6 pb-4 footer"><div class="container mx-auto"><p class="text-gray-100 text-center">@2019-2020 â™¥ tianyong90</p> <p class="text-gray-100 text-center text-sm">
      å…± 0 ç¯‡æ–‡ç«  æœ€åæ›´æ–°äº 
    </p></div></footer> <div class="btn-back-to-top" style="display:none" data-v-42b8f6b3><i class="mdi mdi-arrow-collapse-up" data-v-42b8f6b3></i></div></div></div></div><script>window.__NUXT__={layout:"default",data:[{title:"Homestead + laravel-mix ç¯å¢ƒä¸‹ hmr çš„ä¸¤ç§ç©æ³•",date:"2019-04-18T01:33:24.000Z",top_img:"./top_img.png",tags:["laravel-mix","homestead","hmr"],categories:["å‰ç«¯","webpack"],topImg:"https://raw.githubusercontent.com/tianyong90/blog/gh-pages/_nuxt/posts/Homestead-laravel-mix-%E7%8E%AF%E5%A2%83%E4%B8%8B-hmr-%E7%9A%84%E4%B8%A4%E7%A7%8D%E7%8E%A9%E6%B3%95//top_img.png",html:'<p>æˆ‘åœ¨å‰å‡ å¤©åˆšå†™è¿‡çš„<a href="https://tianyong90.com/2019/04/12/rang-f5-xie-yi-hui-er-laravel-mix-zi-dong-shua-xin-zhi-dao/">ã€Šè®© F5 æ­‡ä¸€ä¼šå„¿â€”â€”laravel-mix è‡ªåŠ¨åˆ·æ–°ä¹‹é“ã€‹</a>ä¸­ä»‹ç»äº† laravel-mix å®ç°è‡ªåŠ¨åˆ·æ–°çš„å‡ ç§æ–¹æ³•ï¼Œå…¶ä¸­å°±æœ‰æ¶‰åŠ hmrï¼ˆHot Module Replacementï¼‰ï¼Œä½†é‡Œé¢éƒ½æ˜¯ä»¥ Laradock ç¯å¢ƒä¸ºä¾‹ã€‚å¯¹äº Laravel å®˜æ–¹é¦–æ¨çš„ Homestead å½“ç„¶ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªä¸è¿‡ç”¨æ³•ä¸Šæœ‰äº›å·®åˆ«ï¼ŒäºåŠ ä¸Š laravel-mix æœ¬èº«çš„ä¸€äº› BUGï¼ˆåœ¨ issue é‡Œæœç´¢ <code>hmr</code> ç»“æœå°±æœ‰å¥½å‡ é¡µ ğŸ˜„ï¼‰ï¼Œå¯¹äºåˆšæ¥è§¦çš„äººæ¥è¯´å¯èƒ½æ— ä»ä¸‹æ‰‹ã€‚</p>\n<p>æœ¬æ–‡ä»‹ç»ä¸¤ç§ä¸åŒçš„ç©æ³•ã€‚</p>\n<blockquote>\n<p>é¦–å…ˆå‡å®šä½ å·²ç»åˆ›å»ºäº†ä¸€ä¸ª laravel é¡¹ç›®ï¼Œè¿›è¡Œäº†ç›¸å…³é…ç½®ï¼ˆ.env é…ç½®åŠç»‘å®šæµ‹è¯•åŸŸåï¼Œå¦‚ï¼šlaravel.testï¼‰å¹¶å·²è£…å¥½äº†åç«¯ä¾èµ–</p>\n</blockquote>\n<h2 id="ç©æ³•ä¸€ï¼šä½¿ç”¨è™šæ‹Ÿæœºä¸­çš„-node-ç¯å¢ƒ"><a class="header-anchor" href="#ç©æ³•ä¸€ï¼šä½¿ç”¨è™šæ‹Ÿæœºä¸­çš„-node-ç¯å¢ƒ">#</a> ç©æ³•ä¸€ï¼šä½¿ç”¨è™šæ‹Ÿæœºä¸­çš„ Node ç¯å¢ƒ</h2>\n<p>å› ä¸º Homestead æä¾›çš„ç¯å¢ƒé‡Œé»˜è®¤åŒ…å«äº†å‰ç«¯å¼€å‘æ‰€éœ€è¦çš„ Node ç¯å¢ƒåŠç›¸å…³å·¥å…·ï¼ˆgulp, npm, yarn ç­‰ï¼‰ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬ä¼¼ä¹æ˜¯å¾ˆçœäº‹çš„é€‰æ‹©ã€‚</p>\n<p><img src="https://raw.githubusercontent.com/tianyong90/blog/gh-pages/_nuxt/posts/Homestead-laravel-mix-%E7%8E%AF%E5%A2%83%E4%B8%8B-hmr-%E7%9A%84%E4%B8%A4%E7%A7%8D%E7%8E%A9%E6%B3%95/%E6%96%B9%E6%B3%951.png" alt="ç©æ³•ä¸€ç¤ºæ„å›¾"></p>\n<ol>\n<li>\n<p><code>vagrant ssh</code> è¿æ¥è™šæ‹Ÿæœºï¼Œè¿›å…¥é¡¹ç›®ç›®å½•åå®‰è£…å‰ç«¯ä¾èµ–</p>\n\x3c!--beforebegin--\x3e<div class="language-bash extra-class">\x3c!--afterbegin--\x3e<pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">install</span>\n</code></pre>\n\x3c!--beforeend--\x3e</div>\x3c!--afterend--\x3e</li>\n<li>\n<p>åœ¨ webpack.mix.js ä¸­è°ƒæ•´ç›¸å…³é…ç½®</p>\n<ul>\n<li>\n<p>ä½¿ç”¨ mix.Webpack() é…ç½® devServer</p>\n\x3c!--beforebegin--\x3e<div class="language-js extra-class">\x3c!--afterbegin--\x3e<pre v-pre class="language-js"><code>mix<span class="token punctuation">.</span><span class="token function">webpackConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n        watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n            poll<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token comment">// è¿™ä¸ªå€¼å¯è°ƒæ•´ï¼Œæ€§èƒ½é«˜çš„æ—¶å€™å¯ä»¥è°ƒå°ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è®¾ç½®ä¸º true</span>\n            ignored<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre>\n\x3c!--beforeend--\x3e</div>\x3c!--afterend--\x3e</li>\n</ul>\n<blockquote>\n<p>è¿™ä¸€é…ç½®å¾ˆå…³é”®ï¼Œå› ä¸ºè¦æ˜¯ä»…ä½¿ç”¨ devServer çš„é»˜è®¤ watch é€‰é¡¹ï¼Œå¯¹äºè™šæ‹Ÿæœºç¯å¢ƒæ˜¯æ— æ•ˆçš„ï¼ˆ<a href="https://webpack.js.org/configuration/watch/#watchoptionspoll">è§ webpack æ–‡æ¡£</a>ï¼‰</p>\n</blockquote>\n<ul>\n<li>\n<p>è°ƒæ•´ hmrOptions</p>\n\x3c!--beforebegin--\x3e<div class="language-js extra-class">\x3c!--afterbegin--\x3e<pre v-pre class="language-js"><code>mix<span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    hmrOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n        host<span class="token operator">:</span> <span class="token string">\'laravel.test\'</span><span class="token punctuation">,</span>\n        port<span class="token operator">:</span> <span class="token number">8080</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre>\n\x3c!--beforeend--\x3e</div>\x3c!--afterend--\x3e</li>\n</ul>\n</li>\n<li>\n<p>åœ¨<strong>è™šæ‹Ÿæœº</strong>ç»ˆç«¯ä¸­æ‰§è¡Œ<code>yarn run hot</code>ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ç»‘å®šçš„æµ‹è¯•åŸŸåï¼ˆå¦‚ï¼šlaravel.testï¼‰è®¿é—®</p>\n</li>\n<li>\n<p>ä¿®æ”¹ JS ç­‰ï¼Œè‡ªåŠ¨ç¼–è¯‘åæµè§ˆå™¨ä¸­é¡µé¢å³è‡ªåŠ¨æ›´æ–°</p>\n</li>\n</ol>\n<h2 id="ç©æ³•äºŒï¼šä½¿ç”¨å®¿ä¸»æœºä¸­çš„-node-ç¯å¢ƒ"><a class="header-anchor" href="#ç©æ³•äºŒï¼šä½¿ç”¨å®¿ä¸»æœºä¸­çš„-node-ç¯å¢ƒ">#</a> ç©æ³•äºŒï¼šä½¿ç”¨å®¿ä¸»æœºä¸­çš„ Node ç¯å¢ƒ</h2>\n<p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å®¿ä¸»æœºçš„ Node ç¯å¢ƒï¼Œå¯¹äºå¼€å‘éƒ½æ¥è¯´ï¼Œè¿™äº›ç¯å¢ƒåº”è¯¥ä¹Ÿæ˜¯å¿…é¡»çš„äº†ã€‚</p>\n<p><img src="https://raw.githubusercontent.com/tianyong90/blog/gh-pages/_nuxt/posts/Homestead-laravel-mix-%E7%8E%AF%E5%A2%83%E4%B8%8B-hmr-%E7%9A%84%E4%B8%A4%E7%A7%8D%E7%8E%A9%E6%B3%95/%E6%96%B9%E6%B3%952.png" alt="ç©æ³•äºŒç¤ºæ„å›¾"></p>\n<ol>\n<li>\n<p>ä»å®¿ä¸»æœºç»ˆç«¯è¿›å…¥é¡¹ç›®ç›®å½•å¹¶å®‰è£…å‰ç«¯ä¾èµ–</p>\n\x3c!--beforebegin--\x3e<div class="language-bash extra-class">\x3c!--afterbegin--\x3e<pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">install</span>\n</code></pre>\n\x3c!--beforeend--\x3e</div>\x3c!--afterend--\x3e</li>\n<li>\n<p>webpack.mix.js ä¸­ä½¿ç”¨ webpackConfig è¿›è¡Œé…ç½®</p>\n\x3c!--beforebegin--\x3e<div class="language-js extra-class">\x3c!--afterbegin--\x3e<pre v-pre class="language-js"><code>mix<span class="token punctuation">.</span><span class="token function">webpackConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n        disableHostCheck<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token comment">// å…¶å®ƒé…ç½®</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre>\n\x3c!--beforeend--\x3e</div>\x3c!--afterend--\x3e<blockquote>\n<p>disableHostCheck: true æ˜¯ä¸ºäº†é¿å…å‡ºç°ä¸‹é¢è¿™ç§é”™è¯¯ã€‚</p>\n</blockquote>\n<p><img src="https://raw.githubusercontent.com/tianyong90/blog/gh-pages/_nuxt/posts/Homestead-laravel-mix-%E7%8E%AF%E5%A2%83%E4%B8%8B-hmr-%E7%9A%84%E4%B8%A4%E7%A7%8D%E7%8E%A9%E6%B3%95/error.png" alt="é”™è¯¯æˆªå›¾"></p>\n<blockquote>\n<p>ä¸ç©æ³•ä¸€ä¸­ä¸ä¸€æ ·ï¼Œä¸å†éœ€è¦ç‰¹åˆ«åœ¨ hmrOptions ä¸­æŒ‡å®š devServer å’Œ host å’Œ portï¼Œä½¿ç”¨é»˜è®¤çš„å°±å¥½ï¼ˆäº‹å®ä¸Šä¹Ÿ<strong>ä¸èƒ½</strong>åƒå‰é¢é‚£æ ·æŒ‡å®šï¼Œå› ä¸ºä¼šå‡ºç° IP/ç«¯å£ å†²çªï¼‰</p>\n</blockquote>\n</li>\n<li>\n<p>åœ¨å®¿ä¸»æœºç»ˆç«¯ä¸­æ‰§è¡Œ<code>yarn run hot</code>ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ç»‘å®šçš„æµ‹è¯•åŸŸåï¼ˆå¦‚ï¼šlaravel.testï¼‰è®¿é—®</p>\n</li>\n<li>\n<p>ä¿®æ”¹ JS ç­‰ï¼Œè‡ªåŠ¨ç¼–è¯‘åæµè§ˆå™¨ä¸­é¡µé¢å³è‡ªåŠ¨æ›´æ–°</p>\n</li>\n</ol>\n<p><strong>laravel-mix 4.0.16 ä¸­ä¿®å¤äº†åœ¨ windows ä¸­ä½¿ç”¨ hmr çš„ BUGï¼Œå¼€å‘ä½“éªŒç›¸è¾ƒä»¥å‰æ›´å¥½ã€‚https://github.com/JeffreyWay/laravel-mix/pull/1995</strong></p>\n<h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“">#</a> æ€»ç»“</h2>\n<p>ä¸¤ç§æ–¹æ³•å¹¶æ²¡æœ‰è°å¥½è°åä¹‹åˆ†ï¼Œå…·ä½“ä½¿ç”¨å“ªç§æ–¹æ³•è§†å…·ä½“åœºæ™¯åŠä¸ªäººå–œå¥½è€Œå®šã€‚å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œé€šå¸¸ä½¿ç”¨ç¬¬äºŒç§ï¼Œä¸»è¦åŸå› æœ‰äºŒï¼š</p>\n<ul>\n<li>\n<p>ä¸€æ˜¯å‡ºäºæ€§èƒ½/å»¶è¿Ÿæ–¹é¢çš„è€ƒè™‘ï¼Œå› ä¸ºåœ¨è™šæ‹Ÿæœºä¸­ä½¿ç”¨è½®è¯¢ï¼ˆpollï¼‰çš„æ–¹å¼æ¥ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œå½“ poll è®¾ç½®é—´éš”è¾ƒå¤§æ—¶å¯èƒ½ä¼šå‡ºç°ä¸€å®šå»¶è¿Ÿï¼Œè€Œè®¾ç½®å¤ªå°è½®è¯¢å¤ªé¢‘ç¹åˆ™åˆå¯èƒ½é€ æˆä¸€å®šçš„æ€§èƒ½å‹åŠ›ã€‚æ‰€ä»¥ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„ Node ç¯å¢ƒä¼¼ä¹æ›´ä¸ºåˆ’ç®—ã€‚</p>\n</li>\n<li>\n<p>äºŒæ˜¯è‡ªå·±ä½¿ç”¨çš„ IDEï¼ˆPhpStormï¼‰è¿è¡Œåœ¨å®¿ä¸»æœºï¼ˆWindowsï¼‰ä¸­ï¼Œè€Œ PhpStorm çš„ä¸€äº›æ’ä»¶ï¼ˆæˆ–æœåŠ¡ï¼‰å¦‚ Eslintã€TypeScriptã€ Prettier éœ€è¦ä½¿ç”¨ä½¿ç”¨æœ¬åœ°å®‰è£…çš„ä¸€äº› npm åŒ…ï¼Œè¿™æ ·å°±åªèƒ½åœ¨å®¿ä¸»ç¯å¢ƒé‡Œå®‰è£…ä¾èµ–ã€‚ï¼ˆè™½ç„¶å¯ä»¥è€ƒè™‘åœ¨å®¿ä¸»æœºå…¨å±€å®‰è£…ä¾èµ–ï¼Œä½†è¯¸å¦‚ eslint-config-xxx ä¹‹ç±»çš„é¡¹ç›®ç›¸å…³çš„åŒ…ä¹Ÿå…¨å±€å®‰è£…ï¼Œå¿…ç„¶é€ æˆæ··ä¹±ï¼‰</p>\n</li>\n</ul>\n<p>å¦‚åŒå­¦ä¹ å¾ˆå¤šå…¶å®ƒæ–°å·¥å…·æ–°ç©æ³•ä¸€æ ·ï¼Œåˆšå¼€å§‹æŠ˜è…¾ laravel-mix æ—¶æ€»æ˜¯ç£•ç£•ç»Šç»Š(æœ‰ä¸å°‘å‘ï¼‰ï¼Œä½†ä¸€æ—¦æŒæ¡äº†çªé—¨ï¼Œå°±èƒ½æå¤§çš„æ–¹ä¾¿æ—¥å¸¸å¼€å‘ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚åšå®¢é‡Œè®°ä¸‹è¿™äº›ï¼Œæƒå½“å¤‡å¿˜ï¼Œä¹Ÿç®—æ˜¯åˆ†äº«ï¼Œç‹¬ä¹ä¸å¦‚ä¼—ä¹ã€‚</p>\n',prevLink:"/posts/sheng-ming-zai-yu-zhe-teng-wo-yong-nuxt.js-chong-gou-liao-bo-ke",nextLink:"/posts/rang-f5-xie-yi-hui-er-laravel-mix-zi-dong-shua-xin-zhi-dao"}],fetch:[],error:null,state:{dropdownMenuVisible:!1,postCount:0,updatedAt:""},serverRendered:!0,routePath:"/posts/homestead-laravel-mix-huan-jing-xia-hmr-de-liang-zhong-wan-fa",config:{}}</script><script src="/_nuxt/08a5556.js" defer></script><script src="/_nuxt/789a29e.js" defer></script><script src="/_nuxt/79c8342.js" defer></script><script src="/_nuxt/c3bf190.js" defer></script><script src="/_nuxt/ffcc2c1.js" defer></script>
<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?d2ba150d5915cb664377726d55cdcaf7";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
</body>
</html>
